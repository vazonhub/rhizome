# Changelog

## [0.2.0] - 2024-01-XX

### Добавлено

#### Механизм популярности
- Система сбора метрик популярности (MetricsCollector)
- Базовые метрики: request_rate, replication_count, freshness, audience_size
- Расширенные метрики: social_engagements, view_time, seed_coverage
- Алгоритм ранжирования с адаптивными весами
- Локальное ранжирование на каждом узле
- Обмен топ-100 популярных элементов между узлами
- Автоматическое продление TTL на основе популярности

#### Система репликации
- Автоматическая репликация популярных данных
- Минимальный фактор репликации для всех данных
- Экстренная репликация при потере узлов
- Репликация на основе рейтинга популярности

#### Интеграция
- Сбор метрик при операциях FIND_VALUE и STORE
- Автоматическое обновление рейтингов каждый час
- Обмен данными о популярности каждые 6 часов
- Фоновые задачи для поддержания системы популярности

---

## [0.1.0] - 2024-01-XX

### Добавлено

#### Базовая инфраструктура
- Система конфигурации с поддержкой YAML
- Система логирования на базе structlog
- Иерархия исключений
- Утилиты для криптографии (генерация Node ID, XOR-расстояние, хэширование)
- Утилиты для сериализации (msgpack, JSON)

#### Kademlia DHT
- Реализация Node ID (160-битный идентификатор)
- Реализация XOR-метрики для вычисления расстояния
- Реализация k-бакетов (160 бакетов, k=20)
- Реализация таблицы маршрутизации
- Реализация операций DHT:
  - PING - проверка доступности узла
  - FIND_NODE - поиск узлов по идентификатору с итеративным алгоритмом
  - FIND_VALUE - поиск значения по ключу
  - STORE - сохранение данных на k ближайших узлах
- Реализация рефрешинга бакетов
- Реализация TTL и expiration для данных
- Автоматическое продление TTL

#### Сетевой протокол
- UDP транспорт для обмена сообщениями
- Сетевой протокол для DHT операций
- Поддержка всех основных операций (PING, FIND_NODE, FIND_VALUE, STORE)
- Обработка входящих запросов и ответов
- Автоматическое обновление routing table

#### Система узлов
- Базовый класс узла (BaseNode)
- Реализация типов узлов:
  - Seed-узел (высокая доступность)
  - Full-узел (основная рабочая нагрузка)
  - Light-узел (ограниченные ресурсы)
  - Mobile-узел (максимально легкий клиент)
- Сохранение и загрузка Node ID
- Bootstrap процесс для подключения к сети
- Фоновые задачи (очистка TTL, рефрешинг бакетов)

#### Хранилище данных
- Локальное хранилище на базе LMDB
- Поддержка TTL для данных
- Автоматическая очистка истекших данных
- Типы данных (Thread, Message, ThreadMetadata)
- Система ключей DHT:
  - Глобальные индексы (threads, popular, recent, seeds)
  - Ключи тредов (meta, index, popular, stats)
  - Ключи сообщений (msg, refs, votes)
  - Ключи пользователей (profile, threads, reputation)

#### Тестирование
- Базовые тесты для криптографии
- Интеграционные тесты для DHT
- Тесты для системы ключей

#### Документация
- План работ (PLAN.md)
- Руководство разработчика (README_DEV.md)
- Примеры использования (examples/)
- Техническая документация (ReadMe.md)

### Известные ограничения

- FIND_VALUE не использует узлы из ответа для расширения поиска
- STORE не обрабатывает ошибки при сохранении на удаленных узлах
- Bootstrap процесс упрощен (нет реального получения списка узлов)
- Нет реализации механизма популярности
- Нет реализации репликации
- Нет реализации анонимности (кольцевые подписи, stealth-адреса)

### Следующие шаги

1. Улучшение FIND_VALUE для использования узлов из ответов
2. Реализация механизма популярности
3. Реализация репликации
4. Реализация анонимности
5. Полнотекстовый поиск
6. Поддержка мультимедиа контента

